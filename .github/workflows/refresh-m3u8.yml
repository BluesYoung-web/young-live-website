name: æ¯å¤©å‡Œæ™¨ 3 ç‚¹æ›´æ–° m3u8

on:
  schedule:
    - cron: '0 19 * * *'

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: æ£€å‡ºä»“åº“
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: æ›´æ–°ä»“åº“
        run: |
          git fetch --all
          git reset --hard origin/master
          echo "ä»…å°è¯• github actions æ— å®é™…ä½œç”¨"

      # - name: ä¸‹è½½æ–‡ä»¶
      #   run: |
      #     wget -q --show-progress -O new_global.m3u https://live.fanmingming.com/tv/m3u/global.m3u

      # - name: æ£€æŸ¥æ–‡ä»¶æ˜¯å¦æœ‰å˜åŒ–
      #   id: check_changes
      #   run: |
      #     if diff -q assets/global.m3u new_global.m3u >/dev/null; then
      #       echo "changes=false" >> "$GITHUB_OUTPUT"
      #     else
      #       echo "changes=true" >> "$GITHUB_OUTPUT"
      #     fi

      # - name: æ›¿æ¢æ–‡ä»¶å¹¶æäº¤æ›´æ”¹
      #   run: |
      #     changes=${{ steps.check_changes.outputs.changes }}
      #     if [[ "$changes" ]]; then
      #       mv new_global.m3u assets/global.m3u
      #       git config user.name BluesYoung-web
      #       git config user.email bluesyoung_web@163.com
      #       git add assets/global.m3u
      #       git commit -m "chore: ğŸ¡ æ›´æ–° global.m3u"
      #       git push origin HEAD
      #     else
      #       echo "æœªæ£€æµ‹åˆ°å˜åŒ–ã€‚è·³è¿‡æäº¤ã€‚"
      #     fi
